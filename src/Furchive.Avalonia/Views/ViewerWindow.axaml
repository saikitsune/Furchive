<Window xmlns="https://github.com/avaloniaui" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:beh="using:Furchive.Avalonia.Behaviors" x:Class="Furchive.Avalonia.Views.ViewerWindow" Width="1400" Height="900" MinWidth="900" MinHeight="480" Title="Viewer" Icon="avares://Furchive/Assets/icon.ico">
    <Grid RowDefinitions="Auto,*">
        <DockPanel Margin="6">
            <StackPanel Orientation="Horizontal" Spacing="6">
                <Button x:Name="PrevButton" Content="◀ Prev" Click="OnPrev"/>
                <Button x:Name="NextButton" Content="Next ▶" Click="OnNext"/>
                <TextBlock Margin="12,0,0,0" VerticalAlignment="Center" Text="{Binding Title}"/>
                <TextBlock Text="  •  " VerticalAlignment="Center"/>
                <TextBlock x:Name="PageNumberText" VerticalAlignment="Center"/>
                <Button Content="Open in Browser" Margin="12,0,0,0" Click="OnOpenSource"/>
                <Button Content="Download" Margin="6,0,0,0" Click="OnDownload"/>
                <Button Content="Folder" Margin="6,0,0,0" Click="OnOpenDownloads"/>
                <TextBlock Margin="12,0,4,0" Text="Fit:" VerticalAlignment="Center"/>
                <ComboBox x:Name="FitModeCombo" Width="110" SelectionChanged="OnFitModeChanged">
                    <ComboBoxItem Content="Contain" IsSelected="True"/>
                    <ComboBoxItem Content="Fill"/>
                    <ComboBoxItem Content="Original"/>
                </ComboBox>
                <StackPanel Orientation="Horizontal" Margin="16,0,0,0" VerticalAlignment="Center">
                    <TextBlock x:Name="ZoomPercentText" Text="100%" Margin="0,0,6,0"/>
                    <Slider x:Name="ZoomSlider" Width="160" Minimum="10" Maximum="500" Value="100" ValueChanged="OnZoomSliderChanged"/>
                </StackPanel>
            </StackPanel>
            <StackPanel Orientation="Horizontal" DockPanel.Dock="Right" Spacing="6">
                <Button Content="Fullscreen" Click="OnToggleFullscreen"/>
                <Button Content="Close" Click="OnClose"/>
            </StackPanel>
        </DockPanel>
        <Grid Grid.Row="1">
            <ScrollViewer x:Name="ViewportScroll" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto"
                                        PointerPressed="OnViewportPointerPressed" PointerReleased="OnViewportPointerReleased" PointerMoved="OnViewportPointerMoved" PointerWheelChanged="OnViewportWheel">
                <Grid x:Name="ViewportContent" Width="{Binding #ViewportScroll.Viewport.Width}" Height="{Binding #ViewportScroll.Viewport.Height}">
                    <Viewbox x:Name="ImageBox" Stretch="Uniform" IsVisible="True">
                        <Grid>
                            <Image x:Name="ImageElement" Stretch="None" beh:RemoteImage.SourceUri=""/>
                        </Grid>
                    </Viewbox>
                    <ContentControl x:Name="VideoHost" IsVisible="False"/>
                </Grid>
            </ScrollViewer>
            <Border x:Name="LoadingOverlay" Background="#B3000000" IsVisible="False">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock x:Name="LoadingText" Text="Loading..." Foreground="White" FontSize="20" HorizontalAlignment="Center"/>
                    <ProgressBar x:Name="LoadingProgress" Width="360" Height="16" Margin="0,10,0,0" Minimum="0" Maximum="100" IsIndeterminate="True"/>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>
